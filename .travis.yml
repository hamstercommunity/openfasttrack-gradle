language: java
sudo: false
jdk:
  - openjdk11

addons:
  sonarcloud:
    organization: "itsallcode"
    token:
      secure: "exPCz9mU55J6U8Eg9iwFAohedUxuNZ7IdRlLtxTyMaoS7LYMbcZBWBs9gAx5sAMjO5lAqIQuDaSGBmbrc/cL203tpRe2pF7eQ1rv4ttIoemJWjMCGjN7zBdhvlZhV2yNYsGM1bgpAF0+aB2BEpiLkc2Oaihmu27KVxAtDViUubU15ubYQBatjNsCPP0Byje2gPbHcW4XN0OO3uU8MzfkMHqDE/CMxncNmacwbnrxjNpx3JwSoOQnPyeEEXXAj21EEWLVfeY/hJssTIeYkU5UkGcKc6oV7nSeQLnE5Sj2NUbwsZV9D4pDsnsy0ECnI/HhfA+htsppMI3YIKpUC9WIfJMhVWxFX8eJWHYhsBFMcIyyUvtlbsD+dZCH1ea8jeyJLWYU8S8qYkLmDP5ZrpN/JMzIP+am7+Bf18oSdcCqSQZGbExF4rRSOjelkBE5hsRxrhgLX2/orzXyiJ/0GKrYKr35kJIGGGdSdvXPf0MQ+CtuZ5ccY11WhPtrh2fuIbHEi9clYX3xdnu8xFLCHXWBK44Jp0wSklaWPSf3Ao0W6elGrEJkhL+UloLnUjAiArlwo7Kn+MZMqWzeHjtne5QHjnZkM2ihN8UNfNP0b2oCUDJXHq2V0GlnCH1BvaZPh+8vFzj78WilZTnDz1T6DPUgJbaeawTbf3xhxk2bKSVBoOo="

before_script:
  # Required for sonar to provide blame information
  - git fetch --unshallow

script:
  - ./gradlew clean check build sonarqube --info --stacktrace

before_cache:
  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
    - $HOME/.sonar/cache/
    - $HOME/.gradle/caches/
    - $HOME/.gradle/wrapper/
